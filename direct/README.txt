Проект: Директ автомат 1.4 - программа автоматического управления ставками Яндекс.Директ и РСЯ                                              
Автор: Кононенко Станислав Александрович                                     			
Сайт: http://директ-автомат.рф
Email: info@direct-automate.ru

ИНСТРУКЦИЯ ПО УСТАНОВКЕ: 

1) Необходимо скопировать все файлы в одну выделенную папку доступную через веб-браузер (например http://ваш-сайт.рф/direct/) на хостинге с поддержкой PHP5.3+ (+mysqli, +mbstring, +openssl) и MySQL5.0+ (рекомендуется до 10000 ключевых фраз любой виртуальный хостинг, свыше 10 тыс. фраз VPS/VDS хостинг от 256Мб оперативной памяти).
1.1 Если папка является корневой для URL вашего домена или поддомена, то .htaccess редактировать не нужно.
 1.2 Если папка является подпапкой вашего сайта, то необходимо отредактировать .htaccess и изменить в нем директиву "RewriteBase	/папка_с_программой/". 
  1.2.1 Если в корневой папке вашего сайта имеется .htaccess с включенным mod_rewrite, 
   то в него необходимо прописать директиву: "RewriteRule	^/папка_с_программой/	-	[L]". Например: RewriteRule ^/direct/ - [L]


2) Необходимо в папке программы в файле config.php прописать данные для доступа к базе данных MySQL (к новой или уже существующей).

3) Поместить в планировщик заданий CRON для запуска файл cron.php с интервалом запуска каждую минуту. Пример автовычисленного задания можно посмотреть в разделе "Настройки" в программе.
Пример задания CRONTAB: * * * * * /usr/bin/php /абсолютный_путь_к_папке_с_программой/cron.php

4) Настройки в интерфейсе Яндекс.Директ (http://direct.yandex.ru):
- В пункте "Стратегия" желательно выбрать "Ручное управление ставками". Можно комбинировать с другими стратегиями Яндекса, при понимании логики совместной работы с программой. 
- Если в программе включена стратегия РСЯ или галочка РСЯ, то для корректной работы обновления ставок в рекламной сети Яндекса (РСЯ) должно быть включено "Независимое управление для разных типов площадок" в интерфейсе Яндекс.Директ.

5) Зайдите в программу под логином "admin" и паролем "admin" по умолчанию. Перейдите на страницу Аккаунты и добавьте один или несколько аккаунтов Яндекс.Директ.
Поля обязательные для заполнения: 
 5.1 Нажмите "Добавить аккаунт Яндекс.Директ" и вбейте обязательные поля.
   - Логин (от аккаунта Яндекс.Директ и одновременно это логин для клиентского доступа в программу. Указывается без @yandex.ru)

   - Пароль (Пароль для клиентского доступа в программу Директ автомат - может отличаться от пароля от Яндекс.Директ )

 5.2 На странице со списком аккаунтов нажмите кнопку "Получить токен" напротив нужного аккаунта. Предварительно авторизуйтесь в Яндекс.Директ (или я.почте) под этим аккаунтом в том же браузере.

Через 10 минут появятся рекламные кампании на странице "Ставки". 

ВОПРОСЫ И ОТВЕТЫ: 

Вопрос: Что делать, если при первом запуске программы белый экран?
Ответ: Повысить версию PHP на сервере до версии 5.3 или выше. Установить права на доступ 777 для папок "files", "files/templates_c/".

Вопрос: Что делать, если при первом входе в программу возникает "Неизвестная ошибка"?
- Проверьте есть ли в папке с программой .htaccess, если нет переименуйте web.htaccess в .htaccess. 
- Проверьте кодировку файла config.php в корне программы. Она должна быть UTF-8 без BOM (например с помощью NOTEPAD++).

Вопрос: Не работает .htaccess что делать? 
Включить в Apache httpd.conf: "mod_rewrite"  и  "AllowOverride All"

Вопрос: Не все записи на странице сохраняются
Ответ: Пропишите в .htaccess строку "php_value max_input_vars 100000" для PHP как модуль Apache или пропишите это значение в PHP.ini для PHP в режиме CGI.

Вопрос: Как настроить планировщик заданий в Windows 7, 8 или 10?
Ответ: Зайдите в "Панель управления\Система и безопасность\Администрирование\Планировщик заданий" и нажмите "Создать задачу".
В закладке "Общие" вбейте любое название задачи, например "Директ автомат".
В закладке "Триггеры" вбейте: 
- Начать задачу "По расписанию"
- Ежедневно
- Повторять задачу каждые 5 минут бесконечно
В закладке "Действия" вбейте: 
- Действие: запуск программы
- Программа или сценарий: путь к cron.bat из папки с установленной программой
Отредактируйте файл "cron.bat" из папки с установленной программой и впишите туда полные путь к интерпретатору PHP и путь к файлу cron.php: c:\xampp\php\php.exe c:\xampp\htdocs\cron.php

Вопрос: Как настроить конфигурационный файл домена для Nginx
Ответ: В файл /etc/nginx/sites-available/default добавить запись (далее сохранить и перезагрузить сервер: service nginx restart). 
server {
	listen 80;
	root /var/www/site.ru/direct;
	index index.php;
	server_name www.direct.site.ru direct.site.ru;

	location / {
		try_files $uri $uri/ /index.php?q=$uri&$args;
	}
	
	location ~ \.php$ {
		# fastcgi_split_path_info ^(.+\.php)(.*)$;
		fastcgi_pass   127.0.0.1:9000;
		fastcgi_index  index.php;

		fastcgi_param  DOCUMENT_ROOT    /direct.site.ru;
		fastcgi_param  SCRIPT_FILENAME  /direct.site.ru$fastcgi_script_name;
		fastcgi_param  PATH_TRANSLATED  /direct.site.ru$fastcgi_script_name;

		include fastcgi_params;
		fastcgi_param  QUERY_STRING     $query_string;
		fastcgi_param  REQUEST_METHOD   $request_method;
		fastcgi_param  CONTENT_TYPE     $content_type;
		fastcgi_param  CONTENT_LENGTH   $content_length;
		fastcgi_intercept_errors        on;
		fastcgi_ignore_client_abort     off;
		fastcgi_connect_timeout 60;
		fastcgi_send_timeout 180;
		fastcgi_read_timeout 180;
		fastcgi_buffer_size 128k;
		fastcgi_buffers 4 256k;
		fastcgi_busy_buffers_size 256k;
		fastcgi_temp_file_write_size 256k;
	}
}